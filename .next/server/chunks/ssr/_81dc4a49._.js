module.exports=[53250,a=>{"use strict";var b=a.i(55726);async function c(){return b.dummyCloudKitchens}async function d(a){return b.dummyCloudKitchens.find(b=>b.id===a)}async function e(a){return b.dummyMenuItems.filter(b=>b.restaurantId===a)}async function f(a){return b.dummyOrders.filter(b=>b.customerId===a)}a.s(["getCloudKitchenById",()=>d,"getCloudKitchens",()=>c,"getMenuItems",()=>e,"getOrders",()=>f])},6665,a=>{"use strict";let b=(0,a.i(61237).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],6665)},52694,a=>{"use strict";var b=a.i(17188),c=a.i(68407),d=a.i(70935),e=a.i(70382),f=a.i(19113);let g=(0,a.i(61237).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var h=a.i(76929),i=a.i(6665),j=a.i(53250);function k(){let a=(0,d.useSearchParams)(),k=(0,d.useRouter)(),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{s("subscription"===a.get("mode")),(async()=>{try{let b=null;!0;{let c=a.get("items");if(c){let a=JSON.parse(c);b={items:a,subtotal:a.reduce((a,b)=>a+b.item.price*b.quantity,0),deliveryFee:2.99,platformFee:2.5,total:0,kitchenId:a[0]?.item?.restaurantId||"kitchen_1"}}}if(!b)return void u("No order data found. Please add items to your cart first.");if(m(b),b.kitchenId){let a=await (0,j.getCloudKitchenById)(b.kitchenId);a?o(a):(console.warn("Kitchen not found, using fallback data"),o({id:b.kitchenId,name:"Cloud Kitchen",deliveryFee:b.deliveryFee||2.99,deliveryTime:30,minOrderAmount:100,cuisineType:["Various"],operatingHours:{open:"11:00",close:"23:00",days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},kitchenType:"cloud_kitchen",image:"",rating:4.5,address:"Delivery Location",coordinates:{lat:0,lng:0},description:"Professional cloud kitchen",businessLicense:"",fssaiLicense:"",subscriptionAvailable:!0,createdAt:new Date}))}}catch(a){console.error("Error initializing checkout:",a),u("Failed to load checkout data. Please try again.")}})()},[a,k]);let v=async()=>{l&&n&&(q(!0),setTimeout(()=>{q(!1),r?k.push("/orders?success=subscription"):k.push("/orders?success=order")},2e3))};if(t)return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.default,{}),(0,b.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-16 text-center",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Checkout Error"}),(0,b.jsx)("p",{className:"text-red-600 mb-4",children:t}),(0,b.jsx)("button",{onClick:()=>k.push("/"),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Back to Home"})]})})]});if(!l||!n)return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.default,{}),(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-16 text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading checkout..."})]})]});let{subtotal:w,deliveryFee:x,platformFee:y,total:z}=l,A=.08*w,B=z+A;return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.default,{}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Checkout"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(i.Users,{className:"w-5 h-5"}),n.name]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("p",{children:n.cuisineType.join(", ")}),(0,b.jsxs)("p",{children:["Min. Order: â‚¹",n.minOrderAmount]}),(0,b.jsxs)("p",{children:["Delivery Time: ",n.deliveryTime," minutes"]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(f.MapPin,{className:"w-5 h-5"}),"Delivery Address"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"123 Customer Street"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Apt 4B, New York, NY 10001"})]}),(0,b.jsx)("button",{className:"text-primary font-medium hover:underline",children:"Change"})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(g,{className:"w-5 h-5"}),"Payment Method"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("input",{type:"radio",id:"card",name:"payment",defaultChecked:!0,className:"w-4 h-4"}),(0,b.jsxs)("label",{htmlFor:"card",className:"cursor-pointer flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"Credit Card"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visa ending in 4242"})]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.Clock,{className:"w-5 h-5"}),"Delivery Time"]}),(0,b.jsxs)("select",{className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{children:"30-35 minutes"}),(0,b.jsx)("option",{children:"35-40 minutes"}),(0,b.jsx)("option",{children:"40-45 minutes"})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6",children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[r&&(0,b.jsx)(i.Users,{className:"w-5 h-5"}),r?"Subscription Summary":"Order Summary"]}),(0,b.jsx)("div",{className:"space-y-3",children:l.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{children:[a.quantity,"x ",a.name]}),(0,b.jsxs)("span",{children:["â‚¹",(a.price*a.quantity).toFixed(2)]})]},c))}),r&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-primary/10 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-primary font-medium",children:"ðŸŽ‰ Subscription mode activated! You'll save 15% on recurring orders."})})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-card border border-neutral-200 rounded-lg p-6 sticky top-20",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-6",children:"Order Total"}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,b.jsxs)("span",{children:["â‚¹",w.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Platform Fee"}),(0,b.jsxs)("span",{children:["â‚¹",y.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Tax (8%)"}),(0,b.jsxs)("span",{children:["â‚¹",A.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Delivery Fee"}),(0,b.jsxs)("span",{children:["â‚¹",x.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"border-t border-neutral-200 pt-4 flex justify-between font-bold text-lg",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{className:"text-primary",children:["â‚¹",B.toFixed(2)]})]}),r&&(0,b.jsx)("div",{className:"text-xs text-green-600 text-center",children:"ðŸ’° Save 15% with subscription!"})]}),(0,b.jsx)("button",{onClick:v,disabled:p,className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-primary-dark transition-colors disabled:opacity-50",children:p?"Processing...":r?`Start Subscription â€¢ â‚¹${B.toFixed(2)}`:`Complete Payment â€¢ â‚¹${B.toFixed(2)}`}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-4",children:"Your payment information is secure"})]})})]})]})]})}a.s(["default",()=>k],52694)}];

//# sourceMappingURL=_81dc4a49._.js.map